<div class="dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">
        <mat-icon class="title-icon">dashboard</mat-icon>
        Dashboard Overview
      </h1>
      <p class="dashboard-subtitle">Welcome to your library management system</p>
    </div>
    <div class="header-actions">
      <button mat-raised-button color="primary" class="action-btn" (click)="loadDashboardData()">
        <mat-icon>refresh</mat-icon>
        Refresh Data
      </button>
    </div>
  </div>

  <!-- Stats Cards Grid -->
  <div class="stats-grid" *ngIf="dashboardStats">
    <mat-card class="stat-card books-card" elevation="3">
      <div class="stat-icon-wrapper books-icon">
        <mat-icon class="stat-icon">menu_book</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ dashboardStats.totalBooks }}</div>
        <div class="stat-label">Total Books</div>
        <div class="stat-trend positive">
          <mat-icon>trending_up</mat-icon>
          <span>+12% from last month</span>
        </div>
      </div>
    </mat-card>

    <mat-card class="stat-card users-card" elevation="3">
      <div class="stat-icon-wrapper users-icon">
        <mat-icon class="stat-icon">people</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ dashboardStats.totalUsers }}</div>
        <div class="stat-label">Total Users</div>
        <div class="stat-trend positive">
          <mat-icon>trending_up</mat-icon>
          <span>+8% from last month</span>
        </div>
      </div>
    </mat-card>

    <mat-card class="stat-card borrowed-card" elevation="3">
      <div class="stat-icon-wrapper borrowed-icon">
        <mat-icon class="stat-icon">bookmark</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ dashboardStats.totalBorrowedBooks }}</div>
        <div class="stat-label">Borrowed Books</div>
        <div class="stat-trend neutral">
          <mat-icon>trending_flat</mat-icon>
          <span>Same as last month</span>
        </div>
      </div>
    </mat-card>

    <mat-card class="stat-card available-card" elevation="3">
      <div class="stat-icon-wrapper available-icon">
        <mat-icon class="stat-icon">library_books</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-number">{{ dashboardStats.totalAvailableBooks }}</div>
        <div class="stat-label">Available Books</div>
        <div class="stat-trend positive">
          <mat-icon>trending_up</mat-icon>
          <span>+5% from last month</span>
        </div>
      </div>
    </mat-card>
  </div>

  <!-- Recent Activity Section -->
  <div class="activity-section" *ngIf="dashboardStats?.recentActivity">
    <mat-card class="activity-card" elevation="2">
      <mat-card-header class="activity-header">
        <div class="activity-title">
          <mat-icon class="activity-icon">history</mat-icon>
          <span>Recent Activity</span>
        </div>
        <button mat-button color="primary" class="view-all-btn">View All</button>
      </mat-card-header>
      <mat-card-content class="activity-content">
        <div class="activity-list">
          <div class="activity-item" *ngFor="let activity of dashboardStats?.recentActivity || []; let i = index">
            <div class="activity-avatar">
              <mat-icon [class]="getActivityIconClass(activity.type)">
                {{ getActivityIcon(activity.type) }}
              </mat-icon>
            </div>
            <div class="activity-details">
              <div class="activity-description">{{ activity?.description }}</div>
              <div class="activity-time">{{ activity?.timestamp | date:'MMM d, y - h:mm a' }}</div>
            </div>
            <div class="activity-status">
              <mat-chip [class]="getActivityChipClass(activity.type)">
                {{ getActivityStatus(activity.type) }}
              </mat-chip>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading">
    <mat-card class="loading-card" elevation="1">
      <div class="loading-content">
        <mat-spinner diameter="40"></mat-spinner>
        <p class="loading-text">Loading dashboard data...</p>
      </div>
    </mat-card>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading && !dashboardStats">
    <mat-card class="empty-card" elevation="1">
      <div class="empty-content">
        <mat-icon class="empty-icon">error_outline</mat-icon>
        <h3>No Data Available</h3>
        <p>Unable to load dashboard statistics. Please try refreshing the page.</p>
        <button mat-raised-button color="primary" (click)="loadDashboardData()">
          <mat-icon>refresh</mat-icon>
          Retry
        </button>
      </div>
    </mat-card>
  </div>

  <div class="error-container" *ngIf="error">
    <mat-icon>error</mat-icon>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="loadDashboardData()">
      Retry
    </button>
  </div>
</div>
